<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agrega tu producto || Huerta directa</title>
    <link rel="icon" type="image/png" href="../login/login/logo.png" />

    <!-- instalacion de las fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <!--agregar los estilos css-->

    <link rel="stylesheet" href="../Pasarela_Pagos/Pasarela.css" />
    <link rel="stylesheet" href="Agregar_producto.css" />

    <!--instalacon bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!--congigurar los links-->
    <!--nombre del producto, descripcion,precio,categoria -->
    <div
      class="container1 d-flex align-items-center justify-content-center gap-5"
    >
      <form
        class="input-box categoria-form border p-4 border-2 rounded-5 px-5"
        action="../../controllers/ControladorP.php"
        method="POST"
        enctype="multipart/form-data"
      >
        <div class="titulo d-flex align-items-center justify-content-center">
          <h2 class="text-uppercase">Registro de Producto</h2>
        </div>
        <br />
        <span class="border border-1"></span>
        <br />

        <div class="nombre-producto d-flex">
          <label class="" for="nombre">Nombre del producto:</label><br />
          <input type="text" id="nombre" name="nombre" required uppercase/>
        </div>

        <span class="border border-1"></span>
        <!--div para juntar precio y categiria-->
        <div class="precio-categorio d-flex align-items-center gap-2">
          <div class="precio-producto">
            <label for="precio">Precio:</label><br />
            <input
              type="number"
              id="precio"
              name="precio"
              step="0.01"
              required
            />
          </div>
          <br />
          <div class="unidad-medida">
            <label for="unidad">Unidad de medida:</label><br />
            <select id="unidad" name="unidad" class="rounded">
              <option value="">Medida</option>
              <option value="kg">Kilogramos (kg)</option>
              <option value="g">Gramos (g)</option>
              <option value="lb">Libras (lb)</option>
              <option value="unidad">Unidad (u)</option>
              <option value="litro">Litros (L)</option>
              <option value="ml">Mililitros (ml)</option>
              <option value="docena">Docena</option>
              <option value="paq">Paquete</option>
              <option value="caja">Caja</option>
              <option value="otro">Otro</option>
            </select>
          </div>
          <br />
          
          <span class="border border-1"></span>

          <div class="cotegoria-producto">
            <label for="categoria">Categor√≠a:</label><br />
            <select
              class="rounded"
              name="categoria-producto"
              id="categoria-producto"
            >
              <option value="">Seleccione la categoria</option>
              <option value="frutas">Frutas</option>
              <option value="verduras-hortalizas">Verduras y Hortalizas</option>
              <option value="lacteos">L√°cteos</option>
              <option value="carnes-proteinas">Carnes y Prote√≠nas</option>
              <option value="cereales-granos">Cereales y Granos</option>
              <option value="legumbres-secas">Legumbres Secas</option>
              <option value="productos-organicos">Productos Org√°nicos</option>
              <option value="hierbas-especias">Hierbas y Especias</option>
              <option value="miel-derivados">Miel y Derivados</option>
              <option value="procesados-artesanales">
                Productos Procesados Artesanales
              </option>
              <option value="bebidas-naturales">Bebidas Naturales</option>
              <option value="plantas-semillas">Plantas y Semillas</option>
              <option value="cajas-combos">Cajas Mixtas o Combos</option>
              <option value="cajas-combos">Otros</option>
            </select>
          </div>
        </div>

        <!--div para juntar precio y categiria-->

        <br />

        <span class="border border-1"></span>

        <div
          class="form-group d-flex align-items-center justify-content-between"
        >
          <label for="imagen">Imagen del producto:</label>
          <input
            type="file"
            id="imagen"
            name="image_product"
            accept="image/*"
            required
            hidden
          />
          <label for="imagen" class="custom-file-label"
            >üìÅ Seleccionar imagen
          </label>
          <span id="file-name">Ning√∫n archivo seleccionado</span>
        </div>

        <span class="border border-1 d-flex"></span>

        <br />
        <div class="descripcion-producto d-flex gap-3">
          <label for="descripcion">Descripci√≥n:</label>
          <textarea
            id="descripcion"
            name="descripcion"
            rows="4"
            cols="50"
            required
          ></textarea>
        </div>
        <br />

        <div
          class="container-button d-flex align-items-center justify-content-center gap-3"
        >
          <button type="submit" class="btn-2">Agregar</button>
          <button type="button" id="btn-visualizar" class="btn-2">
            Visualizar
          </button>
          <a
            class="btn-2 d-flex justify-content-center align-items-center"
            href="../index.html"
            >volver</a
          >
        </div>
      </form>
      <div id="modalVistaPrevia" class="modal">
        <div class="modal-contenido">
          <!--<span class="cerrar" id="cerrarModal">&times;</span>-->
          <div class="product">
            <h3>Vista previa</h3>
            <img id="prev-imagen" class="imagenAgregarProducto" src="../images/ImgenAgregarProducto1.png" alt="Vista previa" />
            <div class="product-txt">
              <h3 id="prev-nombre">Nombre del producto</h3>
              <br />
              <p class="precio" id="prev-precio">Precio $0.00</p>
              <br />
              <p id="prev-unidad">Medida: ‚Äî</p>
              <br />
              <p id="prev-categoria">Categor√≠a: ‚Äî</p>
              <br />
              <p id="prev-descripcion">Descripci√≥n: ‚Äî</p>
            </div>
            <br />
            <button class="cerrar btn-2" id="cerrarModal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const inputImagen = document.getElementById("imagen");
      const fileNameSpan = document.getElementById("file-name");

      inputImagen.addEventListener("change", function () {
        if (inputImagen.files.length > 0) {
          fileNameSpan.textContent = inputImagen.files[0].name;
        } else {
          fileNameSpan.textContent = "Ning√∫n archivo seleccionado";
        }
      });

      // Referencias al formulario
      const btnVisualizar = document.getElementById("btn-visualizar"); // bot√≥n de visualizar
      const nombre = document.querySelector('[name="nombre"]');
      const precio = document.querySelector('[name="precio"]');
      const categoria = document.querySelector('[name="categoria-producto"]');
      const descripcion = document.querySelector('[name="descripcion"]');
      const imagen = document.querySelector('[name="image_product"]');
      const unidad = document.querySelector('[name="unidad"]');

      // Referencias al modal y sus contenidos
      const modal = document.getElementById("modalVistaPrevia");
      const cerrarBtn = document.getElementById("cerrarModal");
      const prevNombre = document.getElementById("prev-nombre");
      const prevPrecio = document.getElementById("prev-precio");
      const prevCategoria = document.getElementById("prev-categoria");
      const prevDescripcion = document.getElementById("prev-descripcion");
      const prevImagen = document.getElementById("prev-imagen");
      const prevUnidad = document.getElementById("prev-unidad");

      // Evento al hacer clic en visualizar
      btnVisualizar.addEventListener("click", () => {
        // Llenar los datos
        prevNombre.textContent = nombre.value || "Nombre del producto";
        prevPrecio.textContent = precio.value ? `Precio: $${precio.value}` : "Precio: $0.00";
        prevUnidad.textContent =
          "Medida: " + (unidad.options[unidad.selectedIndex].text || "‚Äî");
        prevCategoria.textContent =
          "Categor√≠a: " +
          (categoria.options[categoria.selectedIndex].text || "‚Äî");
        prevDescripcion.textContent = "Descripci√≥n: " + (descripcion.value || "Descripci√≥n del producto");

        const file = imagen.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            prevImagen.src = e.target.result;
          };
          reader.readAsDataURL(file);
        } else {
          prevImagen.src = "../images/ImgenAgregarProducto1.png"; // Imagen por defecto
        }

        // Mostrar el modal
        modal.style.display = "block";
      });

      // Cerrar modal al hacer clic en la X
      cerrarBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });

      // Cerrar modal al hacer clic fuera de √©l
      window.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
